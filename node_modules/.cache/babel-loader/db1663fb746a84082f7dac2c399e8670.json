{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"getContainer\", \"motion\", \"prefixCls\", \"maxCount\", \"className\", \"style\", \"onAllRemoved\", \"renderNotifications\"];\nimport * as React from 'react';\nimport Notifications from \"./Notifications\";\n\nvar defaultGetContainer = function defaultGetContainer() {\n  return document.body;\n};\n\nvar uniqueKey = 0;\n\nfunction mergeConfig() {\n  var clone = {};\n\n  for (var _len = arguments.length, objList = new Array(_len), _key = 0; _key < _len; _key++) {\n    objList[_key] = arguments[_key];\n  }\n\n  objList.forEach(function (obj) {\n    if (obj) {\n      Object.keys(obj).forEach(function (key) {\n        var val = obj[key];\n\n        if (val !== undefined) {\n          clone[key] = val;\n        }\n      });\n    }\n  });\n  return clone;\n}\n\nexport default function useNotification() {\n  var rootConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _rootConfig$getContai = rootConfig.getContainer,\n      getContainer = _rootConfig$getContai === void 0 ? defaultGetContainer : _rootConfig$getContai,\n      motion = rootConfig.motion,\n      prefixCls = rootConfig.prefixCls,\n      maxCount = rootConfig.maxCount,\n      className = rootConfig.className,\n      style = rootConfig.style,\n      onAllRemoved = rootConfig.onAllRemoved,\n      renderNotifications = rootConfig.renderNotifications,\n      shareConfig = _objectWithoutProperties(rootConfig, _excluded);\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      container = _React$useState2[0],\n      setContainer = _React$useState2[1];\n\n  var notificationsRef = React.useRef();\n  var contextHolder = /*#__PURE__*/React.createElement(Notifications, {\n    container: container,\n    ref: notificationsRef,\n    prefixCls: prefixCls,\n    motion: motion,\n    maxCount: maxCount,\n    className: className,\n    style: style,\n    onAllRemoved: onAllRemoved,\n    renderNotifications: renderNotifications\n  });\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      taskQueue = _React$useState4[0],\n      setTaskQueue = _React$useState4[1]; // ========================= Refs =========================\n\n\n  var api = React.useMemo(function () {\n    return {\n      open: function open(config) {\n        var mergedConfig = mergeConfig(shareConfig, config);\n\n        if (mergedConfig.key === null || mergedConfig.key === undefined) {\n          mergedConfig.key = \"rc-notification-\".concat(uniqueKey);\n          uniqueKey += 1;\n        }\n\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'open',\n            config: mergedConfig\n          }]);\n        });\n      },\n      close: function close(key) {\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'close',\n            key: key\n          }]);\n        });\n      },\n      destroy: function destroy() {\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'destroy'\n          }]);\n        });\n      }\n    };\n  }, []); // ======================= Container ======================\n  // React 18 should all in effect that we will check container in each render\n  // Which means getContainer should be stable.\n\n  React.useEffect(function () {\n    setContainer(getContainer());\n  }); // ======================== Effect ========================\n\n  React.useEffect(function () {\n    // Flush task when node ready\n    if (notificationsRef.current && taskQueue.length) {\n      taskQueue.forEach(function (task) {\n        switch (task.type) {\n          case 'open':\n            notificationsRef.current.open(task.config);\n            break;\n\n          case 'close':\n            notificationsRef.current.close(task.key);\n            break;\n\n          case 'destroy':\n            notificationsRef.current.destroy();\n            break;\n        }\n      }); // React 17 will mix order of effect & setState in async\n      // - open: setState[0]\n      // - effect[0]\n      // - open: setState[1]\n      // - effect setState([]) * here will clean up [0, 1] in React 17\n\n      setTaskQueue(function (oriQueue) {\n        return oriQueue.filter(function (task) {\n          return !taskQueue.includes(task);\n        });\n      });\n    }\n  }, [taskQueue]); // ======================== Return ========================\n\n  return [api, contextHolder];\n}","map":{"version":3,"sources":["/Users/ravisrivastava/Downloads/newbcom/node_modules/rc-notification/es/useNotification.js"],"names":["_toConsumableArray","_slicedToArray","_objectWithoutProperties","_excluded","React","Notifications","defaultGetContainer","document","body","uniqueKey","mergeConfig","clone","_len","arguments","length","objList","Array","_key","forEach","obj","Object","keys","key","val","undefined","useNotification","rootConfig","_rootConfig$getContai","getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","renderNotifications","shareConfig","_React$useState","useState","_React$useState2","container","setContainer","notificationsRef","useRef","contextHolder","createElement","ref","_React$useState3","_React$useState4","taskQueue","setTaskQueue","api","useMemo","open","config","mergedConfig","concat","queue","type","close","destroy","useEffect","current","task","oriQueue","filter","includes"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"getContainer\", \"motion\", \"prefixCls\", \"maxCount\", \"className\", \"style\", \"onAllRemoved\", \"renderNotifications\"];\nimport * as React from 'react';\nimport Notifications from \"./Notifications\";\nvar defaultGetContainer = function defaultGetContainer() {\n  return document.body;\n};\nvar uniqueKey = 0;\nfunction mergeConfig() {\n  var clone = {};\n  for (var _len = arguments.length, objList = new Array(_len), _key = 0; _key < _len; _key++) {\n    objList[_key] = arguments[_key];\n  }\n  objList.forEach(function (obj) {\n    if (obj) {\n      Object.keys(obj).forEach(function (key) {\n        var val = obj[key];\n        if (val !== undefined) {\n          clone[key] = val;\n        }\n      });\n    }\n  });\n  return clone;\n}\nexport default function useNotification() {\n  var rootConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _rootConfig$getContai = rootConfig.getContainer,\n    getContainer = _rootConfig$getContai === void 0 ? defaultGetContainer : _rootConfig$getContai,\n    motion = rootConfig.motion,\n    prefixCls = rootConfig.prefixCls,\n    maxCount = rootConfig.maxCount,\n    className = rootConfig.className,\n    style = rootConfig.style,\n    onAllRemoved = rootConfig.onAllRemoved,\n    renderNotifications = rootConfig.renderNotifications,\n    shareConfig = _objectWithoutProperties(rootConfig, _excluded);\n  var _React$useState = React.useState(),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    container = _React$useState2[0],\n    setContainer = _React$useState2[1];\n  var notificationsRef = React.useRef();\n  var contextHolder = /*#__PURE__*/React.createElement(Notifications, {\n    container: container,\n    ref: notificationsRef,\n    prefixCls: prefixCls,\n    motion: motion,\n    maxCount: maxCount,\n    className: className,\n    style: style,\n    onAllRemoved: onAllRemoved,\n    renderNotifications: renderNotifications\n  });\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    taskQueue = _React$useState4[0],\n    setTaskQueue = _React$useState4[1];\n\n  // ========================= Refs =========================\n  var api = React.useMemo(function () {\n    return {\n      open: function open(config) {\n        var mergedConfig = mergeConfig(shareConfig, config);\n        if (mergedConfig.key === null || mergedConfig.key === undefined) {\n          mergedConfig.key = \"rc-notification-\".concat(uniqueKey);\n          uniqueKey += 1;\n        }\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'open',\n            config: mergedConfig\n          }]);\n        });\n      },\n      close: function close(key) {\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'close',\n            key: key\n          }]);\n        });\n      },\n      destroy: function destroy() {\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'destroy'\n          }]);\n        });\n      }\n    };\n  }, []);\n\n  // ======================= Container ======================\n  // React 18 should all in effect that we will check container in each render\n  // Which means getContainer should be stable.\n  React.useEffect(function () {\n    setContainer(getContainer());\n  });\n\n  // ======================== Effect ========================\n  React.useEffect(function () {\n    // Flush task when node ready\n    if (notificationsRef.current && taskQueue.length) {\n      taskQueue.forEach(function (task) {\n        switch (task.type) {\n          case 'open':\n            notificationsRef.current.open(task.config);\n            break;\n          case 'close':\n            notificationsRef.current.close(task.key);\n            break;\n          case 'destroy':\n            notificationsRef.current.destroy();\n            break;\n        }\n      });\n\n      // React 17 will mix order of effect & setState in async\n      // - open: setState[0]\n      // - effect[0]\n      // - open: setState[1]\n      // - effect setState([]) * here will clean up [0, 1] in React 17\n      setTaskQueue(function (oriQueue) {\n        return oriQueue.filter(function (task) {\n          return !taskQueue.includes(task);\n        });\n      });\n    }\n  }, [taskQueue]);\n\n  // ======================== Return ========================\n  return [api, contextHolder];\n}"]},"metadata":{},"sourceType":"module"}