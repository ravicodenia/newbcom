{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useMergedState } from 'rc-util';\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from 'react';\n/**\n * 1. Click input to show picker\n * 2. Calculate next open index\n *\n * If click `confirm`:\n * 3. Hide current picker\n * 4. Open next index picker if exist\n *\n * If not `changeOnBlur` and click outside:\n * 3. Hide picker\n *\n * If `changeOnBlur` and click outside:\n * 3. Hide current picker\n * 4. Open next index picker if exist\n */\n\n/**\n * Auto control of open state\n */\n\nexport default function useRangeOpen(defaultOpen, open, activePickerIndex, changeOnBlur, needConfirmButton, startInputRef, endInputRef, startSelectedValue, endSelectedValue, disabled, onOpenChange) {\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      firstTimeOpen = _React$useState2[0],\n      setFirstTimeOpen = _React$useState2[1];\n\n  var _useMergedState = useMergedState(defaultOpen || false, {\n    value: open\n  }),\n      _useMergedState2 = _slicedToArray(_useMergedState, 2),\n      afferentOpen = _useMergedState2[0],\n      setAfferentOpen = _useMergedState2[1];\n\n  var _useMergedState3 = useMergedState(defaultOpen || false, {\n    value: open,\n    onChange: function onChange(nextOpen) {\n      onOpenChange === null || onOpenChange === void 0 || onOpenChange(nextOpen);\n    }\n  }),\n      _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n      mergedOpen = _useMergedState4[0],\n      setMergedOpen = _useMergedState4[1];\n\n  var _useMergedState5 = useMergedState(0, {\n    value: activePickerIndex\n  }),\n      _useMergedState6 = _slicedToArray(_useMergedState5, 2),\n      mergedActivePickerIndex = _useMergedState6[0],\n      setMergedActivePickerIndex = _useMergedState6[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      nextActiveIndex = _React$useState4[0],\n      setNextActiveIndex = _React$useState4[1];\n\n  React.useEffect(function () {\n    if (mergedOpen) {\n      setFirstTimeOpen(true);\n    }\n  }, [mergedOpen]);\n\n  var queryNextIndex = function queryNextIndex(index) {\n    return index === 0 ? 1 : 0;\n  };\n\n  var triggerOpen = useEvent(function (nextOpen, index, source) {\n    if (index === false) {\n      // Only when `nextOpen` is false and no need open to next index\n      setMergedOpen(nextOpen);\n    } else if (nextOpen) {\n      setMergedActivePickerIndex(index);\n      setMergedOpen(nextOpen);\n      var nextIndex = queryNextIndex(index); // Record next open index\n\n      if (!mergedOpen || // Also set next index if next is empty\n      ![startSelectedValue, endSelectedValue][nextIndex]) {\n        setNextActiveIndex(nextIndex);\n      } else {\n        setFirstTimeOpen(false);\n\n        if (nextActiveIndex !== null) {\n          setNextActiveIndex(null);\n        }\n      }\n    } else if (source === 'confirm' || source === 'blur' && changeOnBlur) {\n      // dateTime mode does not need help getting the index\n      var customNextActiveIndex = afferentOpen && !needConfirmButton ? queryNextIndex(index) : nextActiveIndex;\n\n      if (customNextActiveIndex !== null) {\n        setFirstTimeOpen(false);\n        setMergedActivePickerIndex(customNextActiveIndex);\n      }\n\n      setNextActiveIndex(null); // Focus back\n\n      if (customNextActiveIndex !== null && !disabled[customNextActiveIndex]) {\n        raf(function () {\n          var _ref$current;\n\n          var ref = [startInputRef, endInputRef][customNextActiveIndex];\n          (_ref$current = ref.current) === null || _ref$current === void 0 || _ref$current.focus();\n        });\n      } else {\n        setMergedOpen(false);\n      }\n    } else {\n      setMergedOpen(false);\n      setAfferentOpen(false);\n    }\n  });\n  return [mergedOpen, mergedActivePickerIndex, firstTimeOpen, triggerOpen];\n}","map":{"version":3,"sources":["/Users/ravisrivastava/Downloads/newbcom2/newbcom/node_modules/rc-picker/es/hooks/useRangeOpen.js"],"names":["_slicedToArray","useMergedState","useEvent","raf","React","useRangeOpen","defaultOpen","open","activePickerIndex","changeOnBlur","needConfirmButton","startInputRef","endInputRef","startSelectedValue","endSelectedValue","disabled","onOpenChange","_React$useState","useState","_React$useState2","firstTimeOpen","setFirstTimeOpen","_useMergedState","value","_useMergedState2","afferentOpen","setAfferentOpen","_useMergedState3","onChange","nextOpen","_useMergedState4","mergedOpen","setMergedOpen","_useMergedState5","_useMergedState6","mergedActivePickerIndex","setMergedActivePickerIndex","_React$useState3","_React$useState4","nextActiveIndex","setNextActiveIndex","useEffect","queryNextIndex","index","triggerOpen","source","nextIndex","customNextActiveIndex","_ref$current","ref","current","focus"],"mappings":"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","sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useMergedState } from 'rc-util';\nimport useEvent from \"rc-util/es/hooks/useEvent\";\nimport raf from \"rc-util/es/raf\";\nimport * as React from 'react';\n\n/**\n * 1. Click input to show picker\n * 2. Calculate next open index\n *\n * If click `confirm`:\n * 3. Hide current picker\n * 4. Open next index picker if exist\n *\n * If not `changeOnBlur` and click outside:\n * 3. Hide picker\n *\n * If `changeOnBlur` and click outside:\n * 3. Hide current picker\n * 4. Open next index picker if exist\n */\n\n/**\n * Auto control of open state\n */\nexport default function useRangeOpen(defaultOpen, open, activePickerIndex, changeOnBlur, needConfirmButton, startInputRef, endInputRef, startSelectedValue, endSelectedValue, disabled, onOpenChange) {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    firstTimeOpen = _React$useState2[0],\n    setFirstTimeOpen = _React$useState2[1];\n  var _useMergedState = useMergedState(defaultOpen || false, {\n      value: open\n    }),\n    _useMergedState2 = _slicedToArray(_useMergedState, 2),\n    afferentOpen = _useMergedState2[0],\n    setAfferentOpen = _useMergedState2[1];\n  var _useMergedState3 = useMergedState(defaultOpen || false, {\n      value: open,\n      onChange: function onChange(nextOpen) {\n        onOpenChange === null || onOpenChange === void 0 || onOpenChange(nextOpen);\n      }\n    }),\n    _useMergedState4 = _slicedToArray(_useMergedState3, 2),\n    mergedOpen = _useMergedState4[0],\n    setMergedOpen = _useMergedState4[1];\n  var _useMergedState5 = useMergedState(0, {\n      value: activePickerIndex\n    }),\n    _useMergedState6 = _slicedToArray(_useMergedState5, 2),\n    mergedActivePickerIndex = _useMergedState6[0],\n    setMergedActivePickerIndex = _useMergedState6[1];\n  var _React$useState3 = React.useState(null),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    nextActiveIndex = _React$useState4[0],\n    setNextActiveIndex = _React$useState4[1];\n  React.useEffect(function () {\n    if (mergedOpen) {\n      setFirstTimeOpen(true);\n    }\n  }, [mergedOpen]);\n  var queryNextIndex = function queryNextIndex(index) {\n    return index === 0 ? 1 : 0;\n  };\n  var triggerOpen = useEvent(function (nextOpen, index, source) {\n    if (index === false) {\n      // Only when `nextOpen` is false and no need open to next index\n      setMergedOpen(nextOpen);\n    } else if (nextOpen) {\n      setMergedActivePickerIndex(index);\n      setMergedOpen(nextOpen);\n      var nextIndex = queryNextIndex(index);\n\n      // Record next open index\n      if (!mergedOpen ||\n      // Also set next index if next is empty\n      ![startSelectedValue, endSelectedValue][nextIndex]) {\n        setNextActiveIndex(nextIndex);\n      } else {\n        setFirstTimeOpen(false);\n        if (nextActiveIndex !== null) {\n          setNextActiveIndex(null);\n        }\n      }\n    } else if (source === 'confirm' || source === 'blur' && changeOnBlur) {\n      // dateTime mode does not need help getting the index\n      var customNextActiveIndex = afferentOpen && !needConfirmButton ? queryNextIndex(index) : nextActiveIndex;\n      if (customNextActiveIndex !== null) {\n        setFirstTimeOpen(false);\n        setMergedActivePickerIndex(customNextActiveIndex);\n      }\n      setNextActiveIndex(null);\n\n      // Focus back\n      if (customNextActiveIndex !== null && !disabled[customNextActiveIndex]) {\n        raf(function () {\n          var _ref$current;\n          var ref = [startInputRef, endInputRef][customNextActiveIndex];\n          (_ref$current = ref.current) === null || _ref$current === void 0 || _ref$current.focus();\n        });\n      } else {\n        setMergedOpen(false);\n      }\n    } else {\n      setMergedOpen(false);\n      setAfferentOpen(false);\n    }\n  });\n  return [mergedOpen, mergedActivePickerIndex, firstTimeOpen, triggerOpen];\n}"]},"metadata":{},"sourceType":"module"}