{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport hash from '@emotion/hash';\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport { removeCSS, updateCSS } from \"rc-util/es/Dom/dynamicCSS\";\nimport * as React from 'react'; // @ts-ignore\n\nimport unitless from '@emotion/unitless';\nimport { compile, serialize, stringify } from 'stylis';\nimport { contentQuotesLinter, hashedAnimationLinter } from \"../../linters\";\nimport StyleContext, { ATTR_CACHE_PATH, ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE } from \"../../StyleContext\";\nimport { supportLayer } from \"../../util\";\nimport useGlobalCache from \"../useGlobalCache\";\nimport { ATTR_CACHE_MAP, CSS_FILE_STYLE, existPath, getStyleAndHash, serialize as serializeCacheMap } from \"./cacheMapUtil\";\nvar isClientSide = canUseDom();\nvar SKIP_CHECK = '_skip_check_';\nvar MULTI_VALUE = '_multi_value_'; // ============================================================================\n// ==                                 Parser                                 ==\n// ============================================================================\n// Preprocessor style content to browser support one\n\nexport function normalizeStyle(styleStr) {\n  var serialized = serialize(compile(styleStr), stringify);\n  return serialized.replace(/\\{%%%\\:[^;];}/g, ';');\n}\n\nfunction isCompoundCSSProperty(value) {\n  return _typeof(value) === 'object' && value && (SKIP_CHECK in value || MULTI_VALUE in value);\n} // 注入 hash 值\n\n\nfunction injectSelectorHash(key, hashId, hashPriority) {\n  if (!hashId) {\n    return key;\n  }\n\n  var hashClassName = \".\".concat(hashId);\n  var hashSelector = hashPriority === 'low' ? \":where(\".concat(hashClassName, \")\") : hashClassName; // 注入 hashId\n\n  var keys = key.split(',').map(function (k) {\n    var _firstPath$match;\n\n    var fullPath = k.trim().split(/\\s+/); // 如果 Selector 第一个是 HTML Element，那我们就插到它的后面。反之，就插到最前面。\n\n    var firstPath = fullPath[0] || '';\n    var htmlElement = ((_firstPath$match = firstPath.match(/^\\w+/)) === null || _firstPath$match === void 0 ? void 0 : _firstPath$match[0]) || '';\n    firstPath = \"\".concat(htmlElement).concat(hashSelector).concat(firstPath.slice(htmlElement.length));\n    return [firstPath].concat(_toConsumableArray(fullPath.slice(1))).join(' ');\n  });\n  return keys.join(',');\n} // Parse CSSObject to style content\n\n\nexport var parseStyle = function parseStyle(interpolation) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    root: true,\n    parentSelectors: []\n  },\n      root = _ref.root,\n      injectHash = _ref.injectHash,\n      parentSelectors = _ref.parentSelectors;\n\n  var hashId = config.hashId,\n      layer = config.layer,\n      path = config.path,\n      hashPriority = config.hashPriority,\n      _config$transformers = config.transformers,\n      transformers = _config$transformers === void 0 ? [] : _config$transformers,\n      _config$linters = config.linters,\n      linters = _config$linters === void 0 ? [] : _config$linters;\n  var styleStr = '';\n  var effectStyle = {};\n\n  function parseKeyframes(keyframes) {\n    var animationName = keyframes.getName(hashId);\n\n    if (!effectStyle[animationName]) {\n      var _parseStyle = parseStyle(keyframes.style, config, {\n        root: false,\n        parentSelectors: parentSelectors\n      }),\n          _parseStyle2 = _slicedToArray(_parseStyle, 1),\n          _parsedStr = _parseStyle2[0];\n\n      effectStyle[animationName] = \"@keyframes \".concat(keyframes.getName(hashId)).concat(_parsedStr);\n    }\n  }\n\n  function flattenList(list) {\n    var fullList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    list.forEach(function (item) {\n      if (Array.isArray(item)) {\n        flattenList(item, fullList);\n      } else if (item) {\n        fullList.push(item);\n      }\n    });\n    return fullList;\n  }\n\n  var flattenStyleList = flattenList(Array.isArray(interpolation) ? interpolation : [interpolation]);\n  flattenStyleList.forEach(function (originStyle) {\n    // Only root level can use raw string\n    var style = typeof originStyle === 'string' && !root ? {} : originStyle;\n\n    if (typeof style === 'string') {\n      styleStr += \"\".concat(style, \"\\n\");\n    } else if (style._keyframe) {\n      // Keyframe\n      parseKeyframes(style);\n    } else {\n      var mergedStyle = transformers.reduce(function (prev, trans) {\n        var _trans$visit;\n\n        return (trans === null || trans === void 0 ? void 0 : (_trans$visit = trans.visit) === null || _trans$visit === void 0 ? void 0 : _trans$visit.call(trans, prev)) || prev;\n      }, style); // Normal CSSObject\n\n      Object.keys(mergedStyle).forEach(function (key) {\n        var value = mergedStyle[key];\n\n        if (_typeof(value) === 'object' && value && (key !== 'animationName' || !value._keyframe) && !isCompoundCSSProperty(value)) {\n          var subInjectHash = false; // 当成嵌套对象来处理\n\n          var mergedKey = key.trim(); // Whether treat child as root. In most case it is false.\n\n          var nextRoot = false; // 拆分多个选择器\n\n          if ((root || injectHash) && hashId) {\n            if (mergedKey.startsWith('@')) {\n              // 略过媒体查询，交给子节点继续插入 hashId\n              subInjectHash = true;\n            } else {\n              // 注入 hashId\n              mergedKey = injectSelectorHash(key, hashId, hashPriority);\n            }\n          } else if (root && !hashId && (mergedKey === '&' || mergedKey === '')) {\n            // In case of `{ '&': { a: { color: 'red' } } }` or `{ '': { a: { color: 'red' } } }` without hashId,\n            // we will get `&{a:{color:red;}}` or `{a:{color:red;}}` string for stylis to compile.\n            // But it does not conform to stylis syntax,\n            // and finally we will get `{color:red;}` as css, which is wrong.\n            // So we need to remove key in root, and treat child `{ a: { color: 'red' } }` as root.\n            mergedKey = '';\n            nextRoot = true;\n          }\n\n          var _parseStyle3 = parseStyle(value, config, {\n            root: nextRoot,\n            injectHash: subInjectHash,\n            parentSelectors: [].concat(_toConsumableArray(parentSelectors), [mergedKey])\n          }),\n              _parseStyle4 = _slicedToArray(_parseStyle3, 2),\n              _parsedStr2 = _parseStyle4[0],\n              childEffectStyle = _parseStyle4[1];\n\n          effectStyle = _objectSpread(_objectSpread({}, effectStyle), childEffectStyle);\n          styleStr += \"\".concat(mergedKey).concat(_parsedStr2);\n        } else {\n          var _value;\n\n          function appendStyle(cssKey, cssValue) {\n            if (process.env.NODE_ENV !== 'production' && (_typeof(value) !== 'object' || !(value !== null && value !== void 0 && value[SKIP_CHECK]))) {\n              [contentQuotesLinter, hashedAnimationLinter].concat(_toConsumableArray(linters)).forEach(function (linter) {\n                return linter(cssKey, cssValue, {\n                  path: path,\n                  hashId: hashId,\n                  parentSelectors: parentSelectors\n                });\n              });\n            } // 如果是样式则直接插入\n\n\n            var styleName = cssKey.replace(/[A-Z]/g, function (match) {\n              return \"-\".concat(match.toLowerCase());\n            }); // Auto suffix with px\n\n            var formatValue = cssValue;\n\n            if (!unitless[cssKey] && typeof formatValue === 'number' && formatValue !== 0) {\n              formatValue = \"\".concat(formatValue, \"px\");\n            } // handle animationName & Keyframe value\n\n\n            if (cssKey === 'animationName' && cssValue !== null && cssValue !== void 0 && cssValue._keyframe) {\n              parseKeyframes(cssValue);\n              formatValue = cssValue.getName(hashId);\n            }\n\n            styleStr += \"\".concat(styleName, \":\").concat(formatValue, \";\");\n          }\n\n          var actualValue = (_value = value === null || value === void 0 ? void 0 : value.value) !== null && _value !== void 0 ? _value : value;\n\n          if (_typeof(value) === 'object' && value !== null && value !== void 0 && value[MULTI_VALUE] && Array.isArray(actualValue)) {\n            actualValue.forEach(function (item) {\n              appendStyle(key, item);\n            });\n          } else {\n            appendStyle(key, actualValue);\n          }\n        }\n      });\n    }\n  });\n\n  if (!root) {\n    styleStr = \"{\".concat(styleStr, \"}\");\n  } else if (layer && supportLayer()) {\n    var layerCells = layer.split(',');\n    var layerName = layerCells[layerCells.length - 1].trim();\n    styleStr = \"@layer \".concat(layerName, \" {\").concat(styleStr, \"}\"); // Order of layer if needed\n\n    if (layerCells.length > 1) {\n      // zombieJ: stylis do not support layer order, so we need to handle it manually.\n      styleStr = \"@layer \".concat(layer, \"{%%%:%}\").concat(styleStr);\n    }\n  }\n\n  return [styleStr, effectStyle];\n}; // ============================================================================\n// ==                                Register                                ==\n// ============================================================================\n\nfunction uniqueHash(path, styleStr) {\n  return hash(\"\".concat(path.join('%')).concat(styleStr));\n}\n\nfunction Empty() {\n  return null;\n}\n/**\n * Register a style to the global style sheet.\n */\n\n\nexport default function useStyleRegister(info, styleFn) {\n  var token = info.token,\n      path = info.path,\n      hashId = info.hashId,\n      layer = info.layer,\n      nonce = info.nonce,\n      clientOnly = info.clientOnly,\n      _info$order = info.order,\n      order = _info$order === void 0 ? 0 : _info$order;\n\n  var _React$useContext = React.useContext(StyleContext),\n      autoClear = _React$useContext.autoClear,\n      mock = _React$useContext.mock,\n      defaultCache = _React$useContext.defaultCache,\n      hashPriority = _React$useContext.hashPriority,\n      container = _React$useContext.container,\n      ssrInline = _React$useContext.ssrInline,\n      transformers = _React$useContext.transformers,\n      linters = _React$useContext.linters,\n      cache = _React$useContext.cache;\n\n  var tokenKey = token._tokenKey;\n  var fullPath = [tokenKey].concat(_toConsumableArray(path)); // Check if need insert style\n\n  var isMergedClientSide = isClientSide;\n\n  if (process.env.NODE_ENV !== 'production' && mock !== undefined) {\n    isMergedClientSide = mock === 'client';\n  }\n\n  var _useGlobalCache = useGlobalCache('style', fullPath, // Create cache if needed\n  function () {\n    var cachePath = fullPath.join('|'); // Get style from SSR inline style directly\n\n    if (existPath(cachePath)) {\n      var _getStyleAndHash = getStyleAndHash(cachePath),\n          _getStyleAndHash2 = _slicedToArray(_getStyleAndHash, 2),\n          inlineCacheStyleStr = _getStyleAndHash2[0],\n          styleHash = _getStyleAndHash2[1];\n\n      if (inlineCacheStyleStr) {\n        return [inlineCacheStyleStr, tokenKey, styleHash, {}, clientOnly, order];\n      }\n    } // Generate style\n\n\n    var styleObj = styleFn();\n\n    var _parseStyle5 = parseStyle(styleObj, {\n      hashId: hashId,\n      hashPriority: hashPriority,\n      layer: layer,\n      path: path.join('-'),\n      transformers: transformers,\n      linters: linters\n    }),\n        _parseStyle6 = _slicedToArray(_parseStyle5, 2),\n        parsedStyle = _parseStyle6[0],\n        effectStyle = _parseStyle6[1];\n\n    var styleStr = normalizeStyle(parsedStyle);\n    var styleId = uniqueHash(fullPath, styleStr);\n    return [styleStr, tokenKey, styleId, effectStyle, clientOnly, order];\n  }, // Remove cache if no need\n  function (_ref2, fromHMR) {\n    var _ref3 = _slicedToArray(_ref2, 3),\n        styleId = _ref3[2];\n\n    if ((fromHMR || autoClear) && isClientSide) {\n      removeCSS(styleId, {\n        mark: ATTR_MARK\n      });\n    }\n  }, // Effect: Inject style here\n  function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 4),\n        styleStr = _ref5[0],\n        _ = _ref5[1],\n        styleId = _ref5[2],\n        effectStyle = _ref5[3];\n\n    if (isMergedClientSide && styleStr !== CSS_FILE_STYLE) {\n      var mergedCSSConfig = {\n        mark: ATTR_MARK,\n        prepend: 'queue',\n        attachTo: container,\n        priority: order\n      };\n      var nonceStr = typeof nonce === 'function' ? nonce() : nonce;\n\n      if (nonceStr) {\n        mergedCSSConfig.csp = {\n          nonce: nonceStr\n        };\n      }\n\n      var _style = updateCSS(styleStr, styleId, mergedCSSConfig);\n\n      _style[CSS_IN_JS_INSTANCE] = cache.instanceId; // Used for `useCacheToken` to remove on batch when token removed\n\n      _style.setAttribute(ATTR_TOKEN, tokenKey); // Debug usage. Dev only\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        _style.setAttribute(ATTR_CACHE_PATH, fullPath.join('|'));\n      } // Inject client side effect style\n\n\n      Object.keys(effectStyle).forEach(function (effectKey) {\n        updateCSS(normalizeStyle(effectStyle[effectKey]), \"_effect-\".concat(effectKey), mergedCSSConfig);\n      });\n    }\n  }),\n      _useGlobalCache2 = _slicedToArray(_useGlobalCache, 3),\n      cachedStyleStr = _useGlobalCache2[0],\n      cachedTokenKey = _useGlobalCache2[1],\n      cachedStyleId = _useGlobalCache2[2];\n\n  return function (node) {\n    var styleNode;\n\n    if (!ssrInline || isMergedClientSide || !defaultCache) {\n      styleNode = /*#__PURE__*/React.createElement(Empty, null);\n    } else {\n      var _ref6;\n\n      styleNode = /*#__PURE__*/React.createElement(\"style\", _extends({}, (_ref6 = {}, _defineProperty(_ref6, ATTR_TOKEN, cachedTokenKey), _defineProperty(_ref6, ATTR_MARK, cachedStyleId), _ref6), {\n        dangerouslySetInnerHTML: {\n          __html: cachedStyleStr\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, styleNode, node);\n  };\n} // ============================================================================\n// ==                                  SSR                                   ==\n// ============================================================================\n\nexport function extractStyle(cache) {\n  var plain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var matchPrefix = \"style%\"; // prefix with `style` is used for `useStyleRegister` to cache style context\n\n  var styleKeys = Array.from(cache.cache.keys()).filter(function (key) {\n    return key.startsWith(matchPrefix);\n  }); // Common effect styles like animation\n\n  var effectStyles = {}; // Mapping of cachePath to style hash\n\n  var cachePathMap = {};\n  var styleText = '';\n\n  function toStyleStr(style, tokenKey, styleId) {\n    var _objectSpread2;\n\n    var customizeAttrs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    var attrs = _objectSpread(_objectSpread({}, customizeAttrs), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, ATTR_TOKEN, tokenKey), _defineProperty(_objectSpread2, ATTR_MARK, styleId), _objectSpread2));\n\n    var attrStr = Object.keys(attrs).map(function (attr) {\n      var val = attrs[attr];\n      return val ? \"\".concat(attr, \"=\\\"\").concat(val, \"\\\"\") : null;\n    }).filter(function (v) {\n      return v;\n    }).join(' ');\n    return plain ? style : \"<style \".concat(attrStr, \">\").concat(style, \"</style>\");\n  } // ====================== Fill Style ======================\n\n\n  var orderStyles = styleKeys.map(function (key) {\n    var cachePath = key.slice(matchPrefix.length).replace(/%/g, '|');\n\n    var _2 = _slicedToArray(cache.cache.get(key)[1], 6),\n        styleStr = _2[0],\n        tokenKey = _2[1],\n        styleId = _2[2],\n        effectStyle = _2[3],\n        clientOnly = _2[4],\n        order = _2[5]; // Skip client only style\n\n\n    if (clientOnly) {\n      return null;\n    } // ====================== Style ======================\n    // Used for rc-util\n\n\n    var sharedAttrs = {\n      'data-rc-order': 'prependQueue',\n      'data-rc-priority': \"\".concat(order)\n    };\n    var keyStyleText = toStyleStr(styleStr, tokenKey, styleId, sharedAttrs); // Save cache path with hash mapping\n\n    cachePathMap[cachePath] = styleId; // =============== Create effect style ===============\n\n    if (effectStyle) {\n      Object.keys(effectStyle).forEach(function (effectKey) {\n        // Effect style can be reused\n        if (!effectStyles[effectKey]) {\n          effectStyles[effectKey] = true;\n          keyStyleText += toStyleStr(normalizeStyle(effectStyle[effectKey]), tokenKey, \"_effect-\".concat(effectKey), sharedAttrs);\n        }\n      });\n    }\n\n    var ret = [order, keyStyleText];\n    return ret;\n  }).filter(function (o) {\n    return o;\n  });\n  orderStyles.sort(function (o1, o2) {\n    return o1[0] - o2[0];\n  }).forEach(function (_ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n        style = _ref8[1];\n\n    styleText += style;\n  }); // ==================== Fill Cache Path ====================\n\n  styleText += toStyleStr(\".\".concat(ATTR_CACHE_MAP, \"{content:\\\"\").concat(serializeCacheMap(cachePathMap), \"\\\";}\"), undefined, undefined, _defineProperty({}, ATTR_CACHE_MAP, ATTR_CACHE_MAP));\n  return styleText;\n}","map":{"version":3,"sources":["/Users/ravisrivastava/Downloads/newbcom/node_modules/@ant-design/cssinjs/es/hooks/useStyleRegister/index.js"],"names":["_extends","_defineProperty","_objectSpread","_slicedToArray","_toConsumableArray","_typeof","hash","canUseDom","removeCSS","updateCSS","React","unitless","compile","serialize","stringify","contentQuotesLinter","hashedAnimationLinter","StyleContext","ATTR_CACHE_PATH","ATTR_MARK","ATTR_TOKEN","CSS_IN_JS_INSTANCE","supportLayer","useGlobalCache","ATTR_CACHE_MAP","CSS_FILE_STYLE","existPath","getStyleAndHash","serializeCacheMap","isClientSide","SKIP_CHECK","MULTI_VALUE","normalizeStyle","styleStr","serialized","replace","isCompoundCSSProperty","value","injectSelectorHash","key","hashId","hashPriority","hashClassName","concat","hashSelector","keys","split","map","k","_firstPath$match","fullPath","trim","firstPath","htmlElement","match","slice","length","join","parseStyle","interpolation","config","arguments","undefined","_ref","root","parentSelectors","injectHash","layer","path","_config$transformers","transformers","_config$linters","linters","effectStyle","parseKeyframes","keyframes","animationName","getName","_parseStyle","style","_parseStyle2","_parsedStr","flattenList","list","fullList","forEach","item","Array","isArray","push","flattenStyleList","originStyle","_keyframe","mergedStyle","reduce","prev","trans","_trans$visit","visit","call","Object","subInjectHash","mergedKey","nextRoot","startsWith","_parseStyle3","_parseStyle4","_parsedStr2","childEffectStyle","_value","appendStyle","cssKey","cssValue","process","env","NODE_ENV","linter","styleName","toLowerCase","formatValue","actualValue","layerCells","layerName","uniqueHash","Empty","useStyleRegister","info","styleFn","token","nonce","clientOnly","_info$order","order","_React$useContext","useContext","autoClear","mock","defaultCache","container","ssrInline","cache","tokenKey","_tokenKey","isMergedClientSide","_useGlobalCache","cachePath","_getStyleAndHash","_getStyleAndHash2","inlineCacheStyleStr","styleHash","styleObj","_parseStyle5","_parseStyle6","parsedStyle","styleId","_ref2","fromHMR","_ref3","mark","_ref4","_ref5","_","mergedCSSConfig","prepend","attachTo","priority","nonceStr","csp","_style","instanceId","setAttribute","effectKey","_useGlobalCache2","cachedStyleStr","cachedTokenKey","cachedStyleId","node","styleNode","createElement","_ref6","dangerouslySetInnerHTML","__html","Fragment","extractStyle","plain","matchPrefix","styleKeys","from","filter","effectStyles","cachePathMap","styleText","toStyleStr","_objectSpread2","customizeAttrs","attrs","attrStr","attr","val","v","orderStyles","_2","get","sharedAttrs","keyStyleText","ret","o","sort","o1","o2","_ref7","_ref8"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport hash from '@emotion/hash';\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport { removeCSS, updateCSS } from \"rc-util/es/Dom/dynamicCSS\";\nimport * as React from 'react';\n// @ts-ignore\nimport unitless from '@emotion/unitless';\nimport { compile, serialize, stringify } from 'stylis';\nimport { contentQuotesLinter, hashedAnimationLinter } from \"../../linters\";\nimport StyleContext, { ATTR_CACHE_PATH, ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE } from \"../../StyleContext\";\nimport { supportLayer } from \"../../util\";\nimport useGlobalCache from \"../useGlobalCache\";\nimport { ATTR_CACHE_MAP, CSS_FILE_STYLE, existPath, getStyleAndHash, serialize as serializeCacheMap } from \"./cacheMapUtil\";\nvar isClientSide = canUseDom();\nvar SKIP_CHECK = '_skip_check_';\nvar MULTI_VALUE = '_multi_value_';\n// ============================================================================\n// ==                                 Parser                                 ==\n// ============================================================================\n// Preprocessor style content to browser support one\nexport function normalizeStyle(styleStr) {\n  var serialized = serialize(compile(styleStr), stringify);\n  return serialized.replace(/\\{%%%\\:[^;];}/g, ';');\n}\nfunction isCompoundCSSProperty(value) {\n  return _typeof(value) === 'object' && value && (SKIP_CHECK in value || MULTI_VALUE in value);\n}\n\n// 注入 hash 值\nfunction injectSelectorHash(key, hashId, hashPriority) {\n  if (!hashId) {\n    return key;\n  }\n  var hashClassName = \".\".concat(hashId);\n  var hashSelector = hashPriority === 'low' ? \":where(\".concat(hashClassName, \")\") : hashClassName;\n\n  // 注入 hashId\n  var keys = key.split(',').map(function (k) {\n    var _firstPath$match;\n    var fullPath = k.trim().split(/\\s+/);\n\n    // 如果 Selector 第一个是 HTML Element，那我们就插到它的后面。反之，就插到最前面。\n    var firstPath = fullPath[0] || '';\n    var htmlElement = ((_firstPath$match = firstPath.match(/^\\w+/)) === null || _firstPath$match === void 0 ? void 0 : _firstPath$match[0]) || '';\n    firstPath = \"\".concat(htmlElement).concat(hashSelector).concat(firstPath.slice(htmlElement.length));\n    return [firstPath].concat(_toConsumableArray(fullPath.slice(1))).join(' ');\n  });\n  return keys.join(',');\n}\n// Parse CSSObject to style content\nexport var parseStyle = function parseStyle(interpolation) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      root: true,\n      parentSelectors: []\n    },\n    root = _ref.root,\n    injectHash = _ref.injectHash,\n    parentSelectors = _ref.parentSelectors;\n  var hashId = config.hashId,\n    layer = config.layer,\n    path = config.path,\n    hashPriority = config.hashPriority,\n    _config$transformers = config.transformers,\n    transformers = _config$transformers === void 0 ? [] : _config$transformers,\n    _config$linters = config.linters,\n    linters = _config$linters === void 0 ? [] : _config$linters;\n  var styleStr = '';\n  var effectStyle = {};\n  function parseKeyframes(keyframes) {\n    var animationName = keyframes.getName(hashId);\n    if (!effectStyle[animationName]) {\n      var _parseStyle = parseStyle(keyframes.style, config, {\n          root: false,\n          parentSelectors: parentSelectors\n        }),\n        _parseStyle2 = _slicedToArray(_parseStyle, 1),\n        _parsedStr = _parseStyle2[0];\n      effectStyle[animationName] = \"@keyframes \".concat(keyframes.getName(hashId)).concat(_parsedStr);\n    }\n  }\n  function flattenList(list) {\n    var fullList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    list.forEach(function (item) {\n      if (Array.isArray(item)) {\n        flattenList(item, fullList);\n      } else if (item) {\n        fullList.push(item);\n      }\n    });\n    return fullList;\n  }\n  var flattenStyleList = flattenList(Array.isArray(interpolation) ? interpolation : [interpolation]);\n  flattenStyleList.forEach(function (originStyle) {\n    // Only root level can use raw string\n    var style = typeof originStyle === 'string' && !root ? {} : originStyle;\n    if (typeof style === 'string') {\n      styleStr += \"\".concat(style, \"\\n\");\n    } else if (style._keyframe) {\n      // Keyframe\n      parseKeyframes(style);\n    } else {\n      var mergedStyle = transformers.reduce(function (prev, trans) {\n        var _trans$visit;\n        return (trans === null || trans === void 0 ? void 0 : (_trans$visit = trans.visit) === null || _trans$visit === void 0 ? void 0 : _trans$visit.call(trans, prev)) || prev;\n      }, style);\n\n      // Normal CSSObject\n      Object.keys(mergedStyle).forEach(function (key) {\n        var value = mergedStyle[key];\n        if (_typeof(value) === 'object' && value && (key !== 'animationName' || !value._keyframe) && !isCompoundCSSProperty(value)) {\n          var subInjectHash = false;\n\n          // 当成嵌套对象来处理\n          var mergedKey = key.trim();\n          // Whether treat child as root. In most case it is false.\n          var nextRoot = false;\n\n          // 拆分多个选择器\n          if ((root || injectHash) && hashId) {\n            if (mergedKey.startsWith('@')) {\n              // 略过媒体查询，交给子节点继续插入 hashId\n              subInjectHash = true;\n            } else {\n              // 注入 hashId\n              mergedKey = injectSelectorHash(key, hashId, hashPriority);\n            }\n          } else if (root && !hashId && (mergedKey === '&' || mergedKey === '')) {\n            // In case of `{ '&': { a: { color: 'red' } } }` or `{ '': { a: { color: 'red' } } }` without hashId,\n            // we will get `&{a:{color:red;}}` or `{a:{color:red;}}` string for stylis to compile.\n            // But it does not conform to stylis syntax,\n            // and finally we will get `{color:red;}` as css, which is wrong.\n            // So we need to remove key in root, and treat child `{ a: { color: 'red' } }` as root.\n            mergedKey = '';\n            nextRoot = true;\n          }\n          var _parseStyle3 = parseStyle(value, config, {\n              root: nextRoot,\n              injectHash: subInjectHash,\n              parentSelectors: [].concat(_toConsumableArray(parentSelectors), [mergedKey])\n            }),\n            _parseStyle4 = _slicedToArray(_parseStyle3, 2),\n            _parsedStr2 = _parseStyle4[0],\n            childEffectStyle = _parseStyle4[1];\n          effectStyle = _objectSpread(_objectSpread({}, effectStyle), childEffectStyle);\n          styleStr += \"\".concat(mergedKey).concat(_parsedStr2);\n        } else {\n          var _value;\n          function appendStyle(cssKey, cssValue) {\n            if (process.env.NODE_ENV !== 'production' && (_typeof(value) !== 'object' || !(value !== null && value !== void 0 && value[SKIP_CHECK]))) {\n              [contentQuotesLinter, hashedAnimationLinter].concat(_toConsumableArray(linters)).forEach(function (linter) {\n                return linter(cssKey, cssValue, {\n                  path: path,\n                  hashId: hashId,\n                  parentSelectors: parentSelectors\n                });\n              });\n            }\n\n            // 如果是样式则直接插入\n            var styleName = cssKey.replace(/[A-Z]/g, function (match) {\n              return \"-\".concat(match.toLowerCase());\n            });\n\n            // Auto suffix with px\n            var formatValue = cssValue;\n            if (!unitless[cssKey] && typeof formatValue === 'number' && formatValue !== 0) {\n              formatValue = \"\".concat(formatValue, \"px\");\n            }\n\n            // handle animationName & Keyframe value\n            if (cssKey === 'animationName' && cssValue !== null && cssValue !== void 0 && cssValue._keyframe) {\n              parseKeyframes(cssValue);\n              formatValue = cssValue.getName(hashId);\n            }\n            styleStr += \"\".concat(styleName, \":\").concat(formatValue, \";\");\n          }\n          var actualValue = (_value = value === null || value === void 0 ? void 0 : value.value) !== null && _value !== void 0 ? _value : value;\n          if (_typeof(value) === 'object' && value !== null && value !== void 0 && value[MULTI_VALUE] && Array.isArray(actualValue)) {\n            actualValue.forEach(function (item) {\n              appendStyle(key, item);\n            });\n          } else {\n            appendStyle(key, actualValue);\n          }\n        }\n      });\n    }\n  });\n  if (!root) {\n    styleStr = \"{\".concat(styleStr, \"}\");\n  } else if (layer && supportLayer()) {\n    var layerCells = layer.split(',');\n    var layerName = layerCells[layerCells.length - 1].trim();\n    styleStr = \"@layer \".concat(layerName, \" {\").concat(styleStr, \"}\");\n\n    // Order of layer if needed\n    if (layerCells.length > 1) {\n      // zombieJ: stylis do not support layer order, so we need to handle it manually.\n      styleStr = \"@layer \".concat(layer, \"{%%%:%}\").concat(styleStr);\n    }\n  }\n  return [styleStr, effectStyle];\n};\n\n// ============================================================================\n// ==                                Register                                ==\n// ============================================================================\nfunction uniqueHash(path, styleStr) {\n  return hash(\"\".concat(path.join('%')).concat(styleStr));\n}\nfunction Empty() {\n  return null;\n}\n\n/**\n * Register a style to the global style sheet.\n */\nexport default function useStyleRegister(info, styleFn) {\n  var token = info.token,\n    path = info.path,\n    hashId = info.hashId,\n    layer = info.layer,\n    nonce = info.nonce,\n    clientOnly = info.clientOnly,\n    _info$order = info.order,\n    order = _info$order === void 0 ? 0 : _info$order;\n  var _React$useContext = React.useContext(StyleContext),\n    autoClear = _React$useContext.autoClear,\n    mock = _React$useContext.mock,\n    defaultCache = _React$useContext.defaultCache,\n    hashPriority = _React$useContext.hashPriority,\n    container = _React$useContext.container,\n    ssrInline = _React$useContext.ssrInline,\n    transformers = _React$useContext.transformers,\n    linters = _React$useContext.linters,\n    cache = _React$useContext.cache;\n  var tokenKey = token._tokenKey;\n  var fullPath = [tokenKey].concat(_toConsumableArray(path));\n\n  // Check if need insert style\n  var isMergedClientSide = isClientSide;\n  if (process.env.NODE_ENV !== 'production' && mock !== undefined) {\n    isMergedClientSide = mock === 'client';\n  }\n  var _useGlobalCache = useGlobalCache('style', fullPath,\n    // Create cache if needed\n    function () {\n      var cachePath = fullPath.join('|');\n\n      // Get style from SSR inline style directly\n      if (existPath(cachePath)) {\n        var _getStyleAndHash = getStyleAndHash(cachePath),\n          _getStyleAndHash2 = _slicedToArray(_getStyleAndHash, 2),\n          inlineCacheStyleStr = _getStyleAndHash2[0],\n          styleHash = _getStyleAndHash2[1];\n        if (inlineCacheStyleStr) {\n          return [inlineCacheStyleStr, tokenKey, styleHash, {}, clientOnly, order];\n        }\n      }\n\n      // Generate style\n      var styleObj = styleFn();\n      var _parseStyle5 = parseStyle(styleObj, {\n          hashId: hashId,\n          hashPriority: hashPriority,\n          layer: layer,\n          path: path.join('-'),\n          transformers: transformers,\n          linters: linters\n        }),\n        _parseStyle6 = _slicedToArray(_parseStyle5, 2),\n        parsedStyle = _parseStyle6[0],\n        effectStyle = _parseStyle6[1];\n      var styleStr = normalizeStyle(parsedStyle);\n      var styleId = uniqueHash(fullPath, styleStr);\n      return [styleStr, tokenKey, styleId, effectStyle, clientOnly, order];\n    },\n    // Remove cache if no need\n    function (_ref2, fromHMR) {\n      var _ref3 = _slicedToArray(_ref2, 3),\n        styleId = _ref3[2];\n      if ((fromHMR || autoClear) && isClientSide) {\n        removeCSS(styleId, {\n          mark: ATTR_MARK\n        });\n      }\n    },\n    // Effect: Inject style here\n    function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 4),\n        styleStr = _ref5[0],\n        _ = _ref5[1],\n        styleId = _ref5[2],\n        effectStyle = _ref5[3];\n      if (isMergedClientSide && styleStr !== CSS_FILE_STYLE) {\n        var mergedCSSConfig = {\n          mark: ATTR_MARK,\n          prepend: 'queue',\n          attachTo: container,\n          priority: order\n        };\n        var nonceStr = typeof nonce === 'function' ? nonce() : nonce;\n        if (nonceStr) {\n          mergedCSSConfig.csp = {\n            nonce: nonceStr\n          };\n        }\n        var _style = updateCSS(styleStr, styleId, mergedCSSConfig);\n        _style[CSS_IN_JS_INSTANCE] = cache.instanceId;\n\n        // Used for `useCacheToken` to remove on batch when token removed\n        _style.setAttribute(ATTR_TOKEN, tokenKey);\n\n        // Debug usage. Dev only\n        if (process.env.NODE_ENV !== 'production') {\n          _style.setAttribute(ATTR_CACHE_PATH, fullPath.join('|'));\n        }\n\n        // Inject client side effect style\n        Object.keys(effectStyle).forEach(function (effectKey) {\n          updateCSS(normalizeStyle(effectStyle[effectKey]), \"_effect-\".concat(effectKey), mergedCSSConfig);\n        });\n      }\n    }),\n    _useGlobalCache2 = _slicedToArray(_useGlobalCache, 3),\n    cachedStyleStr = _useGlobalCache2[0],\n    cachedTokenKey = _useGlobalCache2[1],\n    cachedStyleId = _useGlobalCache2[2];\n  return function (node) {\n    var styleNode;\n    if (!ssrInline || isMergedClientSide || !defaultCache) {\n      styleNode = /*#__PURE__*/React.createElement(Empty, null);\n    } else {\n      var _ref6;\n      styleNode = /*#__PURE__*/React.createElement(\"style\", _extends({}, (_ref6 = {}, _defineProperty(_ref6, ATTR_TOKEN, cachedTokenKey), _defineProperty(_ref6, ATTR_MARK, cachedStyleId), _ref6), {\n        dangerouslySetInnerHTML: {\n          __html: cachedStyleStr\n        }\n      }));\n    }\n    return /*#__PURE__*/React.createElement(React.Fragment, null, styleNode, node);\n  };\n}\n\n// ============================================================================\n// ==                                  SSR                                   ==\n// ============================================================================\nexport function extractStyle(cache) {\n  var plain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var matchPrefix = \"style%\";\n\n  // prefix with `style` is used for `useStyleRegister` to cache style context\n  var styleKeys = Array.from(cache.cache.keys()).filter(function (key) {\n    return key.startsWith(matchPrefix);\n  });\n\n  // Common effect styles like animation\n  var effectStyles = {};\n\n  // Mapping of cachePath to style hash\n  var cachePathMap = {};\n  var styleText = '';\n  function toStyleStr(style, tokenKey, styleId) {\n    var _objectSpread2;\n    var customizeAttrs = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var attrs = _objectSpread(_objectSpread({}, customizeAttrs), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, ATTR_TOKEN, tokenKey), _defineProperty(_objectSpread2, ATTR_MARK, styleId), _objectSpread2));\n    var attrStr = Object.keys(attrs).map(function (attr) {\n      var val = attrs[attr];\n      return val ? \"\".concat(attr, \"=\\\"\").concat(val, \"\\\"\") : null;\n    }).filter(function (v) {\n      return v;\n    }).join(' ');\n    return plain ? style : \"<style \".concat(attrStr, \">\").concat(style, \"</style>\");\n  }\n\n  // ====================== Fill Style ======================\n\n  var orderStyles = styleKeys.map(function (key) {\n    var cachePath = key.slice(matchPrefix.length).replace(/%/g, '|');\n    var _2 = _slicedToArray(cache.cache.get(key)[1], 6),\n      styleStr = _2[0],\n      tokenKey = _2[1],\n      styleId = _2[2],\n      effectStyle = _2[3],\n      clientOnly = _2[4],\n      order = _2[5];\n\n    // Skip client only style\n    if (clientOnly) {\n      return null;\n    }\n\n    // ====================== Style ======================\n    // Used for rc-util\n    var sharedAttrs = {\n      'data-rc-order': 'prependQueue',\n      'data-rc-priority': \"\".concat(order)\n    };\n    var keyStyleText = toStyleStr(styleStr, tokenKey, styleId, sharedAttrs);\n\n    // Save cache path with hash mapping\n    cachePathMap[cachePath] = styleId;\n\n    // =============== Create effect style ===============\n    if (effectStyle) {\n      Object.keys(effectStyle).forEach(function (effectKey) {\n        // Effect style can be reused\n        if (!effectStyles[effectKey]) {\n          effectStyles[effectKey] = true;\n          keyStyleText += toStyleStr(normalizeStyle(effectStyle[effectKey]), tokenKey, \"_effect-\".concat(effectKey), sharedAttrs);\n        }\n      });\n    }\n    var ret = [order, keyStyleText];\n    return ret;\n  }).filter(function (o) {\n    return o;\n  });\n  orderStyles.sort(function (o1, o2) {\n    return o1[0] - o2[0];\n  }).forEach(function (_ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n      style = _ref8[1];\n    styleText += style;\n  });\n\n  // ==================== Fill Cache Path ====================\n  styleText += toStyleStr(\".\".concat(ATTR_CACHE_MAP, \"{content:\\\"\").concat(serializeCacheMap(cachePathMap), \"\\\";}\"), undefined, undefined, _defineProperty({}, ATTR_CACHE_MAP, ATTR_CACHE_MAP));\n  return styleText;\n}"]},"metadata":{},"sourceType":"module"}